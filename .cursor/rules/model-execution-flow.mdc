---
description: Documents the complete model execution workflow including GPU allocation, command generation, and runtime configuration
globs: *.py,dual_gpu_optimizer/dualgpuopt/*.py
alwaysApply: false
---


# model-execution-flow

## Core Execution Components

### Model Launch Flow (Importance: 95)
`dual_gpu_optimizer/dualgpuopt/__main__.py`
- Probes available GPUs using gpu_info subsystem
- Validates minimum requirement of 2 GPUs
- Generates optimized GPU split configurations
- Creates framework-specific launch commands for llama.cpp and vLLM
- Sets up environment variables for multi-GPU execution

### Command Generation (Importance: 90)
`dual_gpu_optimizer/dualgpuopt/optimizer.py`
- Calculates tensor fractions based on GPU memory distribution
- Constructs environment files for GPU configurations
- Generates specialized command-line arguments for ML frameworks
- Handles memory splits and tensor parallel configurations

### Runtime GPU Management (Importance: 85)
`dual_gpu_optimizer/dualgpuopt/gpu_info.py`
- Collects real-time GPU metrics via NVML interface
- Manages memory utilization data
- Provides mock GPU capabilities for testing
- Monitors temperature, power usage, and clock speeds

### Telemetry Control (Importance: 80)
`dual_gpu_optimizer/dualgpuopt/telemetry.py`
- Implements polling mechanism for GPU metrics
- Streams real-time performance data
- Collects PCIe throughput measurements
- Monitors utilization thresholds

## Launch Modes

### CLI Execution (Importance: 75)
`simple_launcher.py`
- Processes model path and context size inputs 
- Calculates GPU memory split recommendations
- Generates framework-specific execution commands
- Provides command-line interface for optimization

### Standalone Runtime (Importance: 70)
`run_standalone.py`
- Manages dependency requirements
- Enables mock GPU simulation mode
- Handles error logging for execution issues
- Controls application lifecycle

## System Integration

### Resource Monitoring (Importance: 65)
`dual_gpu_optimizer/dualgpuopt/tray.py`
- Tracks GPU utilization thresholds
- Manages idle state detection
- Provides system tray controls
- Handles notification triggers

$END$