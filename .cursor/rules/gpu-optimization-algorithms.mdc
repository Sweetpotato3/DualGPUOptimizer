---
description: Specification for GPU memory distribution algorithms, tensor parallel splits calculation, and memory allocation strategies
globs: **/optimizer.py,**/gpu_info.py,**/gpu_commands.py,**/services/*.py
alwaysApply: false
---


# gpu-optimization-algorithms

Core GPU Optimization Components:

1. Memory Distribution Algorithm (optimizer.py)
Importance Score: 95
- Calculates optimal GPU memory splits based on total memory capacity ratios
- Generates tensor parallelism fractions for balanced GPU utilization
- Produces framework-specific memory allocation parameters for llama.cpp and vLLM
- Handles dynamic context size adjustments based on model requirements

2. GPU Hardware Profiling (gpu_info.py)  
Importance Score: 90
- Custom GPU metrics modeling with comprehensive hardware profiling
- Architecture detection with CUDA core estimation
- Memory capacity and utilization tracking
- Power limit and usage calculations

3. Tensor Split Optimization (optimizer.py)
Importance Score: 85
- Dynamic tensor parallel size computation
- Multi-GPU workload distribution logic
- Memory-aware model splitting for distributed inference
- Framework-specific environment variable generation

4. Overclocking Management (gpu_commands.py)
Importance Score: 75
- GPU-specific overclocking profiles with safety bounds:
  - Core clock offset (-200 to +200 MHz)
  - Memory clock offset (-1000 to +1500 MHz)
  - Power limit (50% to 120%)
  - Fan speed control (0-100%)
- Profile persistence and rollback capability

5. Resource Monitoring (services/event_bus.py)
Importance Score: 70
- Real-time GPU metrics collection:
  - Load balancing metrics
  - PCIe bandwidth monitoring  
  - Power consumption tracking
  - Memory utilization patterns
- Event-driven monitoring pipeline
- Configurable alert thresholds

Key Domain Features:
- Specialized handling of dual-GPU configurations for AI model deployment
- Framework-aware optimization parameter generation
- Hardware capability detection and profiling
- Memory-aware workload distribution
- GPU-specific safety limits enforcement

$END$