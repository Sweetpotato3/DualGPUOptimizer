---
description: Defines core telemetry system for monitoring and managing GPU resources, memory usage, and performance alerts
globs: dualgpuopt/telemetry.py,dualgpuopt/gpu/monitor.py,dualgpuopt/memory/profiler.py
alwaysApply: false
---


# resource-monitoring-system

The resource monitoring system implements specialized GPU telemetry and memory tracking with these key components:

1. GPU Metrics Collection System:
- Real-time monitoring of critical GPU performance indicators:
  * Memory utilization and allocation patterns
  * Temperature thresholds with color-coded warnings (>70°C orange, >80°C red)
  * Power consumption relative to GPU limits
  * Clock speeds (SM and memory)
  * PCIe bandwidth monitoring
- Custom metrics correlation for realistic mock data generation
- Thread-safe metrics collection with RLock implementation

2. Memory Session Analysis:
- Session-based memory tracking for dual GPU inference operations
- Linear regression-based leak detection using memory windows
- Two-tier detection system:
  * Spike detection for rapid memory growth
  * Leak detection for sustained growth patterns
- Cooldown period (30s) between leak alerts to prevent alert storms
- Small memory change filtering (<5MB) to reduce false positives

3. GPU Memory Timeline:
- Per-GPU memory event categorization:
  * ALLOCATION, DEALLOCATION events
  * GROWTH_SPIKE, LEAK_DETECTED indicators
  * INFERENCE_START, INFERENCE_END boundaries
- Session-level reporting with:
  * GPU-specific memory metrics
  * Leak detection history
  * Memory pattern analysis
  * Performance recommendations

4. Resource Event Processing:
- Exponential backoff for NVML recovery attempts (2^attempt seconds)
- Maximum recovery attempt configuration through environment variables
- Automatic mock mode transition after consecutive failures:
  * 3 consecutive errors trigger recovery
  * 5 consecutive errors force mock mode
- GPU-specific error state tracking

Importance Scores:
- GPU Metrics Collection: 95 (Core monitoring functionality)
- Memory Session Analysis: 90 (Critical leak detection)
- GPU Memory Timeline: 85 (Key analysis component)
- Resource Event Processing: 80 (Essential error handling)

File Paths:
dualgpuopt/telemetry.py
dualgpuopt/memory/profiler.py
dualgpuopt/gpu/monitor.py

$END$