---
description: Defines resource monitoring capabilities for tracking GPU utilization, memory, and performance metrics across multiple GPUs.
globs: **/telemetry.py,**/gpu_info.py,**/monitor.py,**/metrics.py,**/alerts.py
alwaysApply: false
---


# resource-monitoring-system

The resource monitoring system implements specialized GPU telemetry collection and metric tracking through several key components:

### Telemetry Collection
`dualgpuopt/telemetry.py`:
- Real-time GPU metrics collection including:
  - GPU utilization percentage 
  - Memory usage and availability
  - Temperature monitoring
  - Power consumption
  - Fan speeds
  - Clock speeds (core and memory)
  - PCIe bandwidth metrics
- Custom middleware pipeline for metric processing
- Event-driven update system with configurable polling intervals
- Automatic failover to mock data after 3 consecutive errors
- Exponential backoff for NVML failures

### Memory Management & Alerts
`dualgpuopt/memory/alerts.py`:
- Memory alert system with severity levels:
  - NORMAL: Within safe thresholds
  - WARNING: Above warning threshold 
  - CRITICAL: Near maximum capacity
  - EMERGENCY: Risk of OOM
- Memory usage prediction based on:
  - Current utilization trends
  - Model-specific memory profiles
  - Growth rate projections
- Recovery strategy triggers:
  - Cache clearing
  - Batch size reduction
  - Model offloading
  - Process termination

### GPU Performance Tracking
`dualgpuopt/metrics.py`:
- Specialized metrics for dual GPU setups:
  - Per-GPU utilization correlation
  - Memory bandwidth between GPUs
  - Thermal throttling detection
  - Power limit tracking
- Historical data collection with 60-sample rolling window
- GPU-specific color coding for metric visualization
- Automatic unit conversion for bandwidth metrics

### Dashboard Integration
`dualgpuopt/gui/dashboard.py`:
- Real-time visualization of GPU metrics
- Color-coded temperature warnings
- Per-GPU performance graphs
- Status indicators for:
  - Memory pressure
  - Thermal conditions
  - Power consumption
  - PCIe utilization
- VRAM reset functionality with status feedback

The monitoring system focuses on providing comprehensive GPU resource tracking with emphasis on dual-GPU configurations, ensuring optimal performance through early warning detection and automated recovery strategies.

$END$