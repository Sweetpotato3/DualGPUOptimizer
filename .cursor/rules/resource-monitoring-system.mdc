---
description: Specification for GPU resource monitoring, telemetry collection, and alert system implementation
globs: **/telemetry.py,**/metrics.py,**/gpu_info.py,**/tray.py,**/monitoring/*.py
alwaysApply: false
---


# resource-monitoring-system

## GPU Telemetry Collection
- Comprehensive real-time GPU metrics tracking:
  - Memory utilization and availability
  - Power consumption against limits
  - Temperature with alert thresholds
  - PCIe bandwidth utilization 
  - Fan speeds and clock rates
- Location: `dualgpuopt/telemetry.py`

## Resource Alert System
- Multi-tier alert system with configurable thresholds:
  - WARNING: Temperature > 80°C, Memory > 85%
  - CRITICAL: Temperature > 90°C, Memory > 95%
  - EMERGENCY: Temperature > 95°C, Memory > 98%
- Location: `dualgpuopt/metrics.py`

## GPU Performance Profiling
- Sequence length weighted profiling:
  - Short sequences (64 tokens): 20% weight
  - Long sequences (1024 tokens): 80% weight
- Memory pressure monitoring with configurable thresholds
- Location: `dualgpuopt/gpu_info.py`

## Memory Management System
Key model memory profiles:
```python
MEMORY_PROFILES = {
  'llama2-7b': {'base': 7GB, 'batch': 50MB, 'token': 3KB},
  'llama2-13b': {'base': 13GB, 'batch': 100MB, 'token': 5KB},
  'llama2-70b': {'base': 35GB, 'batch': 350MB, 'token': 18KB},
  'mistral-7b': {'base': 8GB, 'batch': 55MB, 'token': 3KB},
  'mixtral-8x7b': {'base': 25GB, 'batch': 200MB, 'token': 12KB}
}
```

## Resource Monitoring Dashboard
- Real-time visualization of GPU metrics:
  - GPU/Memory utilization charts
  - Temperature tracking with color alerts
  - Power consumption monitoring
  - Clock speed monitoring
- Location: `dualgpuopt/gui/dashboard.py`

## System Tray Integration
- Systemwide GPU monitoring through tray icon
- Quick access to GPU status and alerts
- Resource threshold notifications
- Location: `dualgpuopt/tray.py`

IMPORTANCE SCORES:
- GPU Telemetry Collection: 95 (Core monitoring functionality)
- Resource Alert System: 90 (Critical for system stability)
- GPU Performance Profiling: 85 (Key optimization component)
- Memory Management System: 90 (Essential for preventing OOM)
- Resource Monitoring Dashboard: 75 (Important user interface)
- System Tray Integration: 70 (Supporting monitoring feature)

$END$