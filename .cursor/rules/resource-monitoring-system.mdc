---
description: Resource monitoring specification for dual GPU optimization system with telemetry, alerts and memory tracking
globs: **/telemetry.py,**/tray.py,**/monitor.py,**/metrics.py,**/gpu_info.py
alwaysApply: false
---


# resource-monitoring-system

Core Telemetry Components:

1. GPU Metrics Collection (telemetry.py)
- Real-time monitoring of dual GPU configurations
- Core metrics tracked:
  * GPU utilization percentage
  * Memory usage/allocation
  * Temperature with thresholds (70°C warning, 80°C critical)
  * Power consumption vs limits
  * Clock speeds (graphics/memory)
  * PCIe bandwidth utilization

2. Alert System Integration
- Three-tier alert system:
  * WARNING: 75% memory usage or 70°C temperature
  * CRITICAL: 90% memory usage or 80°C temperature 
  * EMERGENCY: 95% memory usage or 85°C temperature
- Custom notification queuing with 3-second intervals
- Framework-specific alerts for llama.cpp and vLLM

3. Memory Pattern Analysis
- Tracking memory growth patterns via linear regression
- Leak detection using sliding window analysis
- Two-threshold detection system:
  * Spike detection for rapid growth
  * Sustained growth monitoring
- Custom memory event classification:
  * ALLOCATION/DEALLOCATION events
  * GROWTH_SPIKE markers
  * LEAK_DETECTED warnings
  * INFERENCE_START/END boundaries

4. Performance Monitoring
- Tokens-per-second (TPS) tracking
- GPU utilization correlation
- Memory efficiency metrics
- Temperature-based throttling detection
- Power limit monitoring

5. Resource Recovery
- Automated cache clearing triggers
- Progressive memory reclamation:
  * Cache purge
  * Batch size reduction
  * Process termination
- Resource state validation after recovery

File Paths:
- dualgpuopt/telemetry.py
- dualgpuopt/gpu/monitor.py
- dualgpuopt/memory/monitor.py 
- dualgpuopt/services/resource_manager.py

Business Value: Provides comprehensive monitoring and optimization for dual GPU language model inference with automated resource management and early warning system for potential issues.

$END$