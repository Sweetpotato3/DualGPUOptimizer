---
description: Resource monitoring system for tracking GPU metrics, alerts, and telemetry data in dual GPU optimization scenarios
globs: **/telemetry.py,**/tray.py,**/memory/*.py
alwaysApply: false
---


# resource-monitoring-system

## Core Resource Monitoring Components

### GPU Telemetry Collection
- Specialized metrics tracking for dual GPU systems including:
  - Per-GPU utilization and memory metrics 
  - Temperature monitoring
  - Power usage tracking
  - Fan speed monitoring 
  - PCIe bandwidth measurement
- Maintains 60-second historical data using HistoryBuffer

### Alert Classification System
Implements multi-level alert thresholds for GPU resources:

EMERGENCY:
- Memory usage >= 95%
- Temperature >= 90°C 

CRITICAL:
- Memory usage >= 90%
- Temperature >= 80°C
- Power usage >= 98%

WARNING:  
- Memory usage >= 75%
- Temperature >= 70°C  
- Power usage >= 90%

### Sample Collection
- Fault-tolerant collection with automatic mock data fallback
- Progressive recovery with exponential backoff
- Separate collection strategies for high-end vs mid-range GPUs
- Dynamic sampling rate adjustment based on GPU capabilities

### Event Processing Pipeline
- Dual-mode event publishing (enhanced/legacy)
- Custom metric monitors for:
  - Temperature thresholds
  - Memory pressure
  - Power envelope
- Time-series aggregation for trend analysis
- Automatic history pruning after 60 seconds

### Memory Pattern Analysis
- Real-time memory usage profiling during inference
- Sliding window analysis with configurable thresholds for:
  - Memory spikes (rapid increases)
  - Potential leaks (sustained growth)
  - Post-inference retention patterns

## File Paths
- dualgpuopt/telemetry.py
- dualgpuopt/tray.py
- dualgpuopt/memory/profiler.py

$END$